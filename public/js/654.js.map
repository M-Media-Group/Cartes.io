{"version":3,"sources":["webpack://site/./resources/js/components/PublicMapContainerComponent.vue?b5a7","webpack://site/./resources/js/components/PublicMapContainerComponent.vue?46f8","webpack://site/resources/js/components/PublicMapContainerComponent.vue","webpack://site/./resources/js/components/PublicMapContainerComponent.vue?bd0d","webpack://site/./resources/js/components/PublicMapContainerComponent.vue?e302","webpack://site/./resources/js/components/PublicMapContainerComponent.vue"],"names":["___CSS_LOADER_EXPORT___","push","module","id","props","components","data","map_selector","map","maps","user_maps","markers","menu_hidden","map_settings","show_all","mapSelectedAge","created","this","getAllMaps","mounted","getUsersMaps","computed","mapAgeInMinutes","Math","abs","Vue","moment","diff","created_at","activeMarkers","filter","marker","expiredMarkers","expires_at","isAfter","hasLiveData","users_can_create_markers","categories","map1","activeMaps","single_map","markers_count","title","watch","methods","groupBy","list","forEach","collection","item","set","key","ids","Object","keys","localStorage","includes","replace","length","getAllMarkers","listenForNewMarkers","Echo","channel","uuid","listen","listenForDeletedMarkers","handleMarkerCreate","handleMarkerDelete","handleMapUpdate","handleApiMarkers","getMap","setMap","index","setMapSelector","value","setMenuVisibility","options","_vm","_h","$createElement","_c","_self","attrs","staticStyle","staticClass","on","$event","_v","class","_l","_s","description","_e"],"mappings":"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","file":"js/654.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#formControlRange{direction:rtl}.slide-enter-active,.slide-leave-active{transition:transform .2s ease}.slide-enter,.slide-leave-to{transform:translateX(-100%);transition:all .15s ease-in 0s}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/components/PublicMapContainerComponent.vue\"],\"names\":[],\"mappings\":\"AA2YA,kBACA,aACA,CACA,wCAEA,6BACA,CAEA,6BAEA,2BAAA,CACA,8BACA\",\"sourcesContent\":[\"<template>\\n  <div>\\n    <transition name=\\\"slide\\\">\\n      <div\\n        key=\\\"menu\\\"\\n        style=\\\"position: fixed; left: 1.5rem; bottom: 3rem; z-index: 1000\\\"\\n        v-if=\\\"menu_hidden\\\"\\n      >\\n        <div class=\\\"btn btn-primary\\\" @click=\\\"setMenuVisibility(true)\\\">\\n          Show all maps\\n        </div>\\n        <a :href=\\\"/maps/ + map.uuid\\\" class=\\\"btn btn-secondary\\\">Open map page</a>\\n      </div>\\n      <div\\n        v-else\\n        key=\\\"menu_button\\\"\\n        class=\\\"p-0\\\"\\n        style=\\\"\\n          height: 100vh;\\n          position: fixed;\\n          left: 0;\\n          top: 0;\\n          z-index: 1001;\\n          min-width: 18rem;\\n          max-width: 27rem;\\n          background-color: var(--white);\\n        \\\"\\n      >\\n        <ul\\n          id=\\\"marker_feed\\\"\\n          class=\\\"list-unstyled px-0 pb-3 bg-transparent card\\\"\\n        >\\n          <li\\n            class=\\\"media p-3 card-header\\\"\\n            style=\\\"cursor: pointer; display: block\\\"\\n          >\\n            <div\\n              class=\\\"media-body\\\"\\n              style=\\\"\\n                display: flex;\\n                align-items: center;\\n                justify-content: space-between;\\n              \\\"\\n            >\\n              <h5 class=\\\"mt-0 mb-0\\\">Maps on Cartes.io</h5>\\n              <a\\n                href=\\\"javascript:void(0)\\\"\\n                class=\\\"btn btn-sm text-white\\\"\\n                @click=\\\"setMenuVisibility(0)\\\"\\n                >X</a\\n              >\\n            </div>\\n            <div\\n              class=\\\"mt-3\\\"\\n              style=\\\"\\n                display: flex;\\n                align-items: center;\\n                justify-content: space-between;\\n              \\\"\\n            >\\n              <a\\n                class=\\\"btn btn-sm\\\"\\n                href=\\\"#\\\"\\n                @click=\\\"setMapSelector('user')\\\"\\n                v-bind:class=\\\"[\\n                  map_selector == 'user' ? 'btn-primary' : 'btn-dark',\\n                ]\\\"\\n                >Your maps</a\\n              >\\n              <a\\n                class=\\\"btn btn-sm\\\"\\n                href=\\\"#\\\"\\n                @click=\\\"setMapSelector('public')\\\"\\n                v-bind:class=\\\"[\\n                  map_selector == 'public' ? 'btn-primary' : 'btn-dark',\\n                ]\\\"\\n                >Public maps</a\\n              >\\n            </div>\\n          </li>\\n          <div\\n            id=\\\"marker_feed_markers\\\"\\n            class=\\\"collapse show\\\"\\n            style=\\\"max-height: 83vh; overflow-y: scroll\\\"\\n          >\\n            <template v-if=\\\"activeMaps.length > 0\\\">\\n              <li\\n                class=\\\"media ml-3 mr-3 p-3 mb-3 card\\\"\\n                v-for=\\\"(single_map, index) in activeMaps\\\"\\n                :key=\\\"'map_id_' + single_map.uuid\\\"\\n                @click=\\\"setMap(index)\\\"\\n                v-bind:class=\\\"[\\n                  map && single_map.uuid == map.uuid\\n                    ? 'bg-white text-dark'\\n                    : 'bg-secondary text-white feed-element',\\n                ]\\\"\\n              >\\n                <div class=\\\"media-body\\\">\\n                  <h5 class=\\\"mt-0 mb-1\\\">\\n                    {{ single_map.title || \\\"Untitled map\\\" }}\\n                  </h5>\\n                  <div v-if=\\\"map && single_map.uuid == map.uuid\\\">\\n                    <p>{{ single_map.description }}</p>\\n                    <a\\n                      :href=\\\"/maps/ + map.uuid\\\"\\n                      class=\\\"btn btn-primary btn-block w-100\\\"\\n                      >Open map page</a\\n                    >\\n                  </div>\\n                </div>\\n              </li>\\n              <li class=\\\"media ml-3 mr-3 p-3 mb-3\\\">\\n                <div class=\\\"media-body\\\">\\n                  <button\\n                    type=\\\"submit\\\"\\n                    class=\\\"btn btn-primary mt-3 mb-5 w-100\\\"\\n                    form=\\\"new_map_form\\\"\\n                  >\\n                    Create a map\\n                  </button>\\n                </div>\\n              </li>\\n            </template>\\n            <template v-else>\\n              <div class=\\\"text-center text-muted p-3\\\">\\n                There's no maps to show.\\n              </div>\\n              <li class=\\\"media ml-3 mr-3 p-3 mb-3\\\">\\n                <div class=\\\"media-body\\\">\\n                  <button\\n                    type=\\\"submit\\\"\\n                    class=\\\"btn btn-primary mt-3 mb-5 w-100\\\"\\n                    form=\\\"new_map_form\\\"\\n                  >\\n                    Create a map\\n                  </button>\\n                </div>\\n              </li>\\n            </template>\\n          </div>\\n        </ul>\\n      </div>\\n    </transition>\\n    <div\\n      class=\\\"col-12 p-0\\\"\\n      @touchstart=\\\"setMenuVisibility(0)\\\"\\n      @mousedown=\\\"setMenuVisibility(0)\\\"\\n    >\\n      <map-component\\n        v-if=\\\"map\\\"\\n        :map_id=\\\"map.uuid\\\"\\n        :map_token=\\\"null\\\"\\n        style=\\\"height: 100vh\\\"\\n        :users_can_create_markers=\\\"map.users_can_create_markers\\\"\\n        :map_categories=\\\"categories\\\"\\n        :initial_markers=\\\"null\\\"\\n        v-on:marker-create=\\\"handleMarkerCreate\\\"\\n        v-on:marker-delete=\\\"handleMarkerDelete\\\"\\n      ></map-component>\\n      <div v-else style=\\\"height: 65vh\\\" class=\\\"row align-items-center bg-dark\\\">\\n        <div class=\\\"col text-center\\\">\\n          <div>Cartes.io</div>\\n          <p class=\\\"text-muted mb-0\\\">Contacting planet Earth...</p>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n<script lang=\\\"ts\\\">\\nimport axios from \\\"axios\\\";\\n\\nexport default {\\n  props: [],\\n\\n  components: {},\\n\\n  data() {\\n    return {\\n      map_selector: \\\"public\\\",\\n      map: null,\\n      maps: [],\\n      user_maps: [],\\n      markers: null,\\n      menu_hidden: false,\\n      map_settings: {\\n        show_all: true,\\n        mapSelectedAge: 0,\\n      },\\n    };\\n  },\\n\\n  created() {\\n    this.getAllMaps();\\n    // if (!this.map && !this.markers) {\\n    //     //this.getAllMarkers()\\n    // } else if (this.map && !this.markers) {\\n    //     this.getAllMarkers()\\n    //     this.listenForNewMarkers()\\n    //     this.listenForDeletedMarkers()\\n    // }\\n  },\\n\\n  mounted() {\\n    this.getUsersMaps();\\n  },\\n\\n  computed: {\\n    mapAgeInMinutes() {\\n      if (!this.map) {\\n        return false;\\n      }\\n      return Math.abs(Vue.moment().diff(this.map.created_at, \\\"minutes\\\"));\\n    },\\n    activeMarkers() {\\n      if (!this.markers) {\\n        return [];\\n      } else if (this.map_settings.show_all) {\\n        return this.markers;\\n      }\\n\\n      let markers = this.markers;\\n      let diff_date_time = Vue.moment().subtract(\\n        this.map_settings.mapSelectedAge,\\n        \\\"minutes\\\"\\n      );\\n\\n      return markers.filter(function (marker) {\\n        if (\\n          Vue.moment(marker.created_at).isSameOrBefore(\\n            diff_date_time,\\n            \\\"minute\\\"\\n          ) &&\\n          (marker.expires_at == null ||\\n            Vue.moment(diff_date_time).isBefore(marker.expires_at))\\n        ) {\\n          return true;\\n        }\\n        return false;\\n      });\\n    },\\n    expiredMarkers() {\\n      if (!this.markers) {\\n        return [];\\n      }\\n      return this.markers.filter(function (marker) {\\n        if (!marker.expires_at) {\\n          return false;\\n        }\\n        return Vue.moment().isAfter(Vue.moment(marker.expires_at));\\n        //return new Date() > new Date(Date.parse(marker.expires_at.replace(/-/g, '/')))\\n      });\\n    },\\n    hasLiveData() {\\n      if (!this.map) {\\n        return false;\\n      }\\n      if (this.map.users_can_create_markers === \\\"no\\\") {\\n        return false;\\n      }\\n      if (this.markers < 1) {\\n        return false;\\n      }\\n      return true;\\n    },\\n    categories() {\\n      if (!this.markers) {\\n        return [];\\n      }\\n      var map1 = this.markers.map((x) => x.category);\\n      return (\\n        map1\\n          .map((e) => e.id)\\n          // store the indexes of the unique objects\\n          .map((e, i, final) => final.indexOf(e) === i && i)\\n          // eliminate the false indexes & return unique objects\\n          .filter((e) => map1[e])\\n          .map((e) => map1[e])\\n      );\\n    },\\n    activeMaps() {\\n      if (this.map_selector == \\\"user\\\") {\\n        return this.user_maps;\\n      }\\n      return this.maps.filter(function (single_map) {\\n        return single_map.markers_count > 0 && single_map.title !== \\\"\\\";\\n      });\\n    },\\n  },\\n\\n  watch: {},\\n\\n  methods: {\\n    groupBy(list, keyGetter) {\\n      const map = new Map();\\n      list.forEach((item) => {\\n        const key = keyGetter(item);\\n        const collection = map.get(key);\\n        if (!collection) {\\n          map.set(key, [item]);\\n        } else {\\n          collection.push(item);\\n        }\\n      });\\n      return map;\\n    },\\n\\n    getAllMaps() {\\n      axios\\n        .get(\\\"/api/maps\\\")\\n        .then((response) => ((this.maps = response.data.data), this.setMap(0)));\\n    },\\n\\n    getUsersMaps() {\\n      var ids = [];\\n      Object.keys(localStorage).forEach(function (key) {\\n        if (key.includes(\\\"map_\\\")) {\\n          ids.push(key.replace(\\\"map_\\\", \\\"\\\"));\\n        }\\n      });\\n\\n      if (ids.length > 0) {\\n        axios\\n          .get(\\\"/api/maps\\\", {\\n            params: {\\n              ids: ids,\\n              orderBy: \\\"updated_at\\\",\\n            },\\n          })\\n          .then((response) => {\\n            this.user_maps = response.data.data;\\n          });\\n      }\\n    },\\n\\n    getAllMarkers() {\\n      axios\\n        .get(\\\"/api/maps/\\\" + this.map.uuid + \\\"/markers?show_expired=true\\\")\\n        .then((response) => (this.markers = response.data));\\n    },\\n\\n    listenForNewMarkers() {\\n      Echo.channel(\\\"maps.\\\" + this.map.uuid).listen(\\\"MarkerCreated\\\", (e) => {\\n        this.handleMarkerCreate(e.marker);\\n      });\\n    },\\n\\n    listenForDeletedMarkers() {\\n      Echo.channel(\\\"maps.\\\" + this.map.uuid).listen(\\\"MarkerDeleted\\\", (e) => {\\n        this.handleMarkerDelete(e.marker.id);\\n      });\\n    },\\n\\n    handleMarkerCreate(marker) {\\n      this.markers.push(marker);\\n    },\\n\\n    handleMarkerDelete(id) {\\n      this.markers = this.markers.filter((e) => e.id !== id);\\n    },\\n\\n    handleMapUpdate(map) {\\n      this.map = map;\\n    },\\n\\n    handleApiMarkers(markers) {\\n      this.markers = markers;\\n    },\\n\\n    getMap(map_uuid) {\\n      axios\\n        .get(\\\"/api/maps/\\\" + map_uuid)\\n        .then((response) => (this.map = response.data));\\n      this.getAllMarkers();\\n      this.listenForNewMarkers();\\n      this.listenForDeletedMarkers();\\n    },\\n\\n    setMap(index) {\\n      this.map = this.activeMaps[index];\\n    },\\n\\n    setMapSelector(value) {\\n      this.map_selector = value;\\n    },\\n\\n    setMenuVisibility(value) {\\n      if (value) {\\n        return (this.menu_hidden = false);\\n      }\\n      return (this.menu_hidden = true);\\n    },\\n  },\\n};\\n</script>\\n<style>\\n#formControlRange {\\n  direction: rtl;\\n}\\n.slide-enter-active,\\n.slide-leave-active {\\n  transition: transform 0.2s ease;\\n}\\n\\n.slide-enter,\\n.slide-leave-to {\\n  transform: translateX(-100%);\\n  transition: all 150ms ease-in 0s;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"name\":\"slide\"}},[(_vm.menu_hidden)?_c('div',{key:\"menu\",staticStyle:{\"position\":\"fixed\",\"left\":\"1.5rem\",\"bottom\":\"3rem\",\"z-index\":\"1000\"}},[_c('div',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.setMenuVisibility(true)}}},[_vm._v(\"\\n        Show all maps\\n      \")]),_vm._v(\" \"),_c('a',{staticClass:\"btn btn-secondary\",attrs:{\"href\":/maps/ + _vm.map.uuid}},[_vm._v(\"Open map page\")])]):_c('div',{key:\"menu_button\",staticClass:\"p-0\",staticStyle:{\"height\":\"100vh\",\"position\":\"fixed\",\"left\":\"0\",\"top\":\"0\",\"z-index\":\"1001\",\"min-width\":\"18rem\",\"max-width\":\"27rem\",\"background-color\":\"var(--white)\"}},[_c('ul',{staticClass:\"list-unstyled px-0 pb-3 bg-transparent card\",attrs:{\"id\":\"marker_feed\"}},[_c('li',{staticClass:\"media p-3 card-header\",staticStyle:{\"cursor\":\"pointer\",\"display\":\"block\"}},[_c('div',{staticClass:\"media-body\",staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\"}},[_c('h5',{staticClass:\"mt-0 mb-0\"},[_vm._v(\"Maps on Cartes.io\")]),_vm._v(\" \"),_c('a',{staticClass:\"btn btn-sm text-white\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.setMenuVisibility(0)}}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('div',{staticClass:\"mt-3\",staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\"}},[_c('a',{staticClass:\"btn btn-sm\",class:[\n                _vm.map_selector == 'user' ? 'btn-primary' : 'btn-dark' ],attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.setMapSelector('user')}}},[_vm._v(\"Your maps\")]),_vm._v(\" \"),_c('a',{staticClass:\"btn btn-sm\",class:[\n                _vm.map_selector == 'public' ? 'btn-primary' : 'btn-dark' ],attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.setMapSelector('public')}}},[_vm._v(\"Public maps\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"collapse show\",staticStyle:{\"max-height\":\"83vh\",\"overflow-y\":\"scroll\"},attrs:{\"id\":\"marker_feed_markers\"}},[(_vm.activeMaps.length > 0)?[_vm._l((_vm.activeMaps),function(single_map,index){return _c('li',{key:'map_id_' + single_map.uuid,staticClass:\"media ml-3 mr-3 p-3 mb-3 card\",class:[\n                _vm.map && single_map.uuid == _vm.map.uuid\n                  ? 'bg-white text-dark'\n                  : 'bg-secondary text-white feed-element' ],on:{\"click\":function($event){return _vm.setMap(index)}}},[_c('div',{staticClass:\"media-body\"},[_c('h5',{staticClass:\"mt-0 mb-1\"},[_vm._v(\"\\n                  \"+_vm._s(single_map.title || \"Untitled map\")+\"\\n                \")]),_vm._v(\" \"),(_vm.map && single_map.uuid == _vm.map.uuid)?_c('div',[_c('p',[_vm._v(_vm._s(single_map.description))]),_vm._v(\" \"),_c('a',{staticClass:\"btn btn-primary btn-block w-100\",attrs:{\"href\":/maps/ + _vm.map.uuid}},[_vm._v(\"Open map page\")])]):_vm._e()])])}),_vm._v(\" \"),_c('li',{staticClass:\"media ml-3 mr-3 p-3 mb-3\"},[_c('div',{staticClass:\"media-body\"},[_c('button',{staticClass:\"btn btn-primary mt-3 mb-5 w-100\",attrs:{\"type\":\"submit\",\"form\":\"new_map_form\"}},[_vm._v(\"\\n                  Create a map\\n                \")])])])]:[_c('div',{staticClass:\"text-center text-muted p-3\"},[_vm._v(\"\\n              There's no maps to show.\\n            \")]),_vm._v(\" \"),_c('li',{staticClass:\"media ml-3 mr-3 p-3 mb-3\"},[_c('div',{staticClass:\"media-body\"},[_c('button',{staticClass:\"btn btn-primary mt-3 mb-5 w-100\",attrs:{\"type\":\"submit\",\"form\":\"new_map_form\"}},[_vm._v(\"\\n                  Create a map\\n                \")])])])]],2)])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-12 p-0\",on:{\"touchstart\":function($event){return _vm.setMenuVisibility(0)},\"mousedown\":function($event){return _vm.setMenuVisibility(0)}}},[(_vm.map)?_c('map-component',{staticStyle:{\"height\":\"100vh\"},attrs:{\"map_id\":_vm.map.uuid,\"map_token\":null,\"users_can_create_markers\":_vm.map.users_can_create_markers,\"map_categories\":_vm.categories,\"initial_markers\":null},on:{\"marker-create\":_vm.handleMarkerCreate,\"marker-delete\":_vm.handleMarkerDelete}}):_c('div',{staticClass:\"row align-items-center bg-dark\",staticStyle:{\"height\":\"65vh\"}},[_c('div',{staticClass:\"col text-center\"},[_c('div',[_vm._v(\"Cartes.io\")]),_vm._v(\" \"),_c('p',{staticClass:\"text-muted mb-0\"},[_vm._v(\"Contacting planet Earth...\")])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <transition name=\"slide\">\n      <div\n        key=\"menu\"\n        style=\"position: fixed; left: 1.5rem; bottom: 3rem; z-index: 1000\"\n        v-if=\"menu_hidden\"\n      >\n        <div class=\"btn btn-primary\" @click=\"setMenuVisibility(true)\">\n          Show all maps\n        </div>\n        <a :href=\"/maps/ + map.uuid\" class=\"btn btn-secondary\">Open map page</a>\n      </div>\n      <div\n        v-else\n        key=\"menu_button\"\n        class=\"p-0\"\n        style=\"\n          height: 100vh;\n          position: fixed;\n          left: 0;\n          top: 0;\n          z-index: 1001;\n          min-width: 18rem;\n          max-width: 27rem;\n          background-color: var(--white);\n        \"\n      >\n        <ul\n          id=\"marker_feed\"\n          class=\"list-unstyled px-0 pb-3 bg-transparent card\"\n        >\n          <li\n            class=\"media p-3 card-header\"\n            style=\"cursor: pointer; display: block\"\n          >\n            <div\n              class=\"media-body\"\n              style=\"\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n              \"\n            >\n              <h5 class=\"mt-0 mb-0\">Maps on Cartes.io</h5>\n              <a\n                href=\"javascript:void(0)\"\n                class=\"btn btn-sm text-white\"\n                @click=\"setMenuVisibility(0)\"\n                >X</a\n              >\n            </div>\n            <div\n              class=\"mt-3\"\n              style=\"\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n              \"\n            >\n              <a\n                class=\"btn btn-sm\"\n                href=\"#\"\n                @click=\"setMapSelector('user')\"\n                v-bind:class=\"[\n                  map_selector == 'user' ? 'btn-primary' : 'btn-dark',\n                ]\"\n                >Your maps</a\n              >\n              <a\n                class=\"btn btn-sm\"\n                href=\"#\"\n                @click=\"setMapSelector('public')\"\n                v-bind:class=\"[\n                  map_selector == 'public' ? 'btn-primary' : 'btn-dark',\n                ]\"\n                >Public maps</a\n              >\n            </div>\n          </li>\n          <div\n            id=\"marker_feed_markers\"\n            class=\"collapse show\"\n            style=\"max-height: 83vh; overflow-y: scroll\"\n          >\n            <template v-if=\"activeMaps.length > 0\">\n              <li\n                class=\"media ml-3 mr-3 p-3 mb-3 card\"\n                v-for=\"(single_map, index) in activeMaps\"\n                :key=\"'map_id_' + single_map.uuid\"\n                @click=\"setMap(index)\"\n                v-bind:class=\"[\n                  map && single_map.uuid == map.uuid\n                    ? 'bg-white text-dark'\n                    : 'bg-secondary text-white feed-element',\n                ]\"\n              >\n                <div class=\"media-body\">\n                  <h5 class=\"mt-0 mb-1\">\n                    {{ single_map.title || \"Untitled map\" }}\n                  </h5>\n                  <div v-if=\"map && single_map.uuid == map.uuid\">\n                    <p>{{ single_map.description }}</p>\n                    <a\n                      :href=\"/maps/ + map.uuid\"\n                      class=\"btn btn-primary btn-block w-100\"\n                      >Open map page</a\n                    >\n                  </div>\n                </div>\n              </li>\n              <li class=\"media ml-3 mr-3 p-3 mb-3\">\n                <div class=\"media-body\">\n                  <button\n                    type=\"submit\"\n                    class=\"btn btn-primary mt-3 mb-5 w-100\"\n                    form=\"new_map_form\"\n                  >\n                    Create a map\n                  </button>\n                </div>\n              </li>\n            </template>\n            <template v-else>\n              <div class=\"text-center text-muted p-3\">\n                There's no maps to show.\n              </div>\n              <li class=\"media ml-3 mr-3 p-3 mb-3\">\n                <div class=\"media-body\">\n                  <button\n                    type=\"submit\"\n                    class=\"btn btn-primary mt-3 mb-5 w-100\"\n                    form=\"new_map_form\"\n                  >\n                    Create a map\n                  </button>\n                </div>\n              </li>\n            </template>\n          </div>\n        </ul>\n      </div>\n    </transition>\n    <div\n      class=\"col-12 p-0\"\n      @touchstart=\"setMenuVisibility(0)\"\n      @mousedown=\"setMenuVisibility(0)\"\n    >\n      <map-component\n        v-if=\"map\"\n        :map_id=\"map.uuid\"\n        :map_token=\"null\"\n        style=\"height: 100vh\"\n        :users_can_create_markers=\"map.users_can_create_markers\"\n        :map_categories=\"categories\"\n        :initial_markers=\"null\"\n        v-on:marker-create=\"handleMarkerCreate\"\n        v-on:marker-delete=\"handleMarkerDelete\"\n      ></map-component>\n      <div v-else style=\"height: 65vh\" class=\"row align-items-center bg-dark\">\n        <div class=\"col text-center\">\n          <div>Cartes.io</div>\n          <p class=\"text-muted mb-0\">Contacting planet Earth...</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport axios from \"axios\";\n\nexport default {\n  props: [],\n\n  components: {},\n\n  data() {\n    return {\n      map_selector: \"public\",\n      map: null,\n      maps: [],\n      user_maps: [],\n      markers: null,\n      menu_hidden: false,\n      map_settings: {\n        show_all: true,\n        mapSelectedAge: 0,\n      },\n    };\n  },\n\n  created() {\n    this.getAllMaps();\n    // if (!this.map && !this.markers) {\n    //     //this.getAllMarkers()\n    // } else if (this.map && !this.markers) {\n    //     this.getAllMarkers()\n    //     this.listenForNewMarkers()\n    //     this.listenForDeletedMarkers()\n    // }\n  },\n\n  mounted() {\n    this.getUsersMaps();\n  },\n\n  computed: {\n    mapAgeInMinutes() {\n      if (!this.map) {\n        return false;\n      }\n      return Math.abs(Vue.moment().diff(this.map.created_at, \"minutes\"));\n    },\n    activeMarkers() {\n      if (!this.markers) {\n        return [];\n      } else if (this.map_settings.show_all) {\n        return this.markers;\n      }\n\n      let markers = this.markers;\n      let diff_date_time = Vue.moment().subtract(\n        this.map_settings.mapSelectedAge,\n        \"minutes\"\n      );\n\n      return markers.filter(function (marker) {\n        if (\n          Vue.moment(marker.created_at).isSameOrBefore(\n            diff_date_time,\n            \"minute\"\n          ) &&\n          (marker.expires_at == null ||\n            Vue.moment(diff_date_time).isBefore(marker.expires_at))\n        ) {\n          return true;\n        }\n        return false;\n      });\n    },\n    expiredMarkers() {\n      if (!this.markers) {\n        return [];\n      }\n      return this.markers.filter(function (marker) {\n        if (!marker.expires_at) {\n          return false;\n        }\n        return Vue.moment().isAfter(Vue.moment(marker.expires_at));\n        //return new Date() > new Date(Date.parse(marker.expires_at.replace(/-/g, '/')))\n      });\n    },\n    hasLiveData() {\n      if (!this.map) {\n        return false;\n      }\n      if (this.map.users_can_create_markers === \"no\") {\n        return false;\n      }\n      if (this.markers < 1) {\n        return false;\n      }\n      return true;\n    },\n    categories() {\n      if (!this.markers) {\n        return [];\n      }\n      var map1 = this.markers.map((x) => x.category);\n      return (\n        map1\n          .map((e) => e.id)\n          // store the indexes of the unique objects\n          .map((e, i, final) => final.indexOf(e) === i && i)\n          // eliminate the false indexes & return unique objects\n          .filter((e) => map1[e])\n          .map((e) => map1[e])\n      );\n    },\n    activeMaps() {\n      if (this.map_selector == \"user\") {\n        return this.user_maps;\n      }\n      return this.maps.filter(function (single_map) {\n        return single_map.markers_count > 0 && single_map.title !== \"\";\n      });\n    },\n  },\n\n  watch: {},\n\n  methods: {\n    groupBy(list, keyGetter) {\n      const map = new Map();\n      list.forEach((item) => {\n        const key = keyGetter(item);\n        const collection = map.get(key);\n        if (!collection) {\n          map.set(key, [item]);\n        } else {\n          collection.push(item);\n        }\n      });\n      return map;\n    },\n\n    getAllMaps() {\n      axios\n        .get(\"/api/maps\")\n        .then((response) => ((this.maps = response.data.data), this.setMap(0)));\n    },\n\n    getUsersMaps() {\n      var ids = [];\n      Object.keys(localStorage).forEach(function (key) {\n        if (key.includes(\"map_\")) {\n          ids.push(key.replace(\"map_\", \"\"));\n        }\n      });\n\n      if (ids.length > 0) {\n        axios\n          .get(\"/api/maps\", {\n            params: {\n              ids: ids,\n              orderBy: \"updated_at\",\n            },\n          })\n          .then((response) => {\n            this.user_maps = response.data.data;\n          });\n      }\n    },\n\n    getAllMarkers() {\n      axios\n        .get(\"/api/maps/\" + this.map.uuid + \"/markers?show_expired=true\")\n        .then((response) => (this.markers = response.data));\n    },\n\n    listenForNewMarkers() {\n      Echo.channel(\"maps.\" + this.map.uuid).listen(\"MarkerCreated\", (e) => {\n        this.handleMarkerCreate(e.marker);\n      });\n    },\n\n    listenForDeletedMarkers() {\n      Echo.channel(\"maps.\" + this.map.uuid).listen(\"MarkerDeleted\", (e) => {\n        this.handleMarkerDelete(e.marker.id);\n      });\n    },\n\n    handleMarkerCreate(marker) {\n      this.markers.push(marker);\n    },\n\n    handleMarkerDelete(id) {\n      this.markers = this.markers.filter((e) => e.id !== id);\n    },\n\n    handleMapUpdate(map) {\n      this.map = map;\n    },\n\n    handleApiMarkers(markers) {\n      this.markers = markers;\n    },\n\n    getMap(map_uuid) {\n      axios\n        .get(\"/api/maps/\" + map_uuid)\n        .then((response) => (this.map = response.data));\n      this.getAllMarkers();\n      this.listenForNewMarkers();\n      this.listenForDeletedMarkers();\n    },\n\n    setMap(index) {\n      this.map = this.activeMaps[index];\n    },\n\n    setMapSelector(value) {\n      this.map_selector = value;\n    },\n\n    setMenuVisibility(value) {\n      if (value) {\n        return (this.menu_hidden = false);\n      }\n      return (this.menu_hidden = true);\n    },\n  },\n};\n</script>\n<style>\n#formControlRange {\n  direction: rtl;\n}\n.slide-enter-active,\n.slide-leave-active {\n  transition: transform 0.2s ease;\n}\n\n.slide-enter,\n.slide-leave-to {\n  transform: translateX(-100%);\n  transition: all 150ms ease-in 0s;\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicMapContainerComponent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicMapContainerComponent.vue?vue&type=script&lang=ts&\"","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-9[0].rules[0].use[1]!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9[0].rules[0].use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicMapContainerComponent.vue?vue&type=style&index=0&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./PublicMapContainerComponent.vue?vue&type=template&id=a84d6cb8&\"\nimport script from \"./PublicMapContainerComponent.vue?vue&type=script&lang=ts&\"\nexport * from \"./PublicMapContainerComponent.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PublicMapContainerComponent.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}