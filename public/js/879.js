(self.webpackChunksite=self.webpackChunksite||[]).push([[879],{7879:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>i});const r={props:["markers"],data:function(){return{datacollection:{},timedatacollection:{},show_all:!0,chartLineOptions:{onClick:this.handleClick,scales:{xAxes:[{type:"time",distribution:"linear"}]}}}},mounted:function(){this.markers&&(this.fillChartData(),this.fillPieData())},computed:{},watch:{markers:function(t){this.fillChartData(),this.fillPieData()}},methods:{groupBy:function(t,a){var e=new Map;return t.forEach((function(t){var r=a(t),i=e.get(r);i?i.push(t):e.set(r,[t])})),e},fillChartData:function(){var t=this.groupBy(this.markers,(function(t){return Vue.moment(t.created_at).startOf("hour").toString()}));this.timedatacollection={labels:Array.from(t).map((function(t){return t[0]})),datasets:[{label:"Markers",borderColor:"#1C77C3",data:Array.from(t).map((function(t){return t[1].length}))}]}},fillPieData:function(){var t=this.groupBy(this.markers,(function(t){return t.category.name}));this.datacollection={labels:Array.from(t).map((function(t){return t[0]})),datasets:[{label:"New markers",borderColor:"#1C77C3",data:Array.from(t).map((function(t){return t[1].length}))}]}},handleClick:function(t,a){var e=a[0],r=e._index,i=e._chart.data.labels[r];e._chart.data.datasets[0].data[r];this.$emit("clicked-date",{index:e._index,backgroundColor:e._view.backgroundColor,value:i})}}};const i=(0,e(1900).Z)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.markers&&t.markers.length>1?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("h3",[t._v("Marker type distribution")]),t._v(" "),e("chart-pie-component",{staticClass:"mt-5 mb-5",staticStyle:{width:"100%"},attrs:{"chart-data":t.datacollection,height:225}})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("h3",[t._v("New markers by date")]),t._v(" "),e("chart-line-component",{staticClass:"mt-5 mb-5",staticStyle:{width:"100%"},attrs:{"chart-data":t.timedatacollection,options:t.chartLineOptions,height:225}})],1)]):e("div",[e("p",{staticClass:"small"},[t._v("\n    There's not enough markers on this map yet. More stats will be available\n    after a few more markers are added.\n  ")])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=879.js.map