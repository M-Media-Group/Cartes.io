{"version":3,"file":"js/282.js","mappings":"wHAAA,I,SCgCA,MChCyS,EDgCzS,CACEA,MAAO,CAAC,WACRC,KAAI,WACF,MAAO,CACLC,eAAgB,GAChBC,mBAAoB,GACpBC,UAAU,EACVC,iBAAkB,CAChBC,QAASC,KAAKC,YACdC,OAAQ,CACNC,MAAO,CACL,CACEC,KAAM,OACNC,aAAc,eAU1BC,QAAO,WACDN,KAAKO,UACPP,KAAKQ,gBACLR,KAAKS,gBAGTC,SAAU,GAEVC,MAAO,CACLJ,QAAO,SAACK,GACNZ,KAAKQ,gBACLR,KAAKS,gBAITI,QAAS,CACPC,QAAO,SAACC,EAAMC,GACZ,IAAMC,EAAM,IAAIC,IAUhB,OATAH,EAAKI,SAAQ,SAACC,GACZ,IAAMC,EAAML,EAAUI,GAChBE,EAAaL,EAAIM,IAAIF,GACtBC,EAGHA,EAAWE,KAAKJ,GAFhBH,EAAIQ,IAAIJ,EAAK,CAACD,OAKXH,GAETT,cAAa,WACX,IAAMkB,EAAU1B,KAAKc,QAAQd,KAAKO,SAAS,SAACoB,GAE1C,OAAOC,EAAAA,QAAAA,OAAWD,EAAOE,YAAYC,QAAQ,QAAQC,cAEvD/B,KAAKJ,mBAAqB,CACxBoC,OAAQC,MAAMC,KAAKR,GAAST,KAAI,SAACU,GAAW,OAAAA,EAAO,MACnDQ,SAAU,CACR,CACEC,MAAO,UACPC,YAAa,UACb3C,KAAMuC,MAAMC,KAAKR,GAAST,KAAI,SAACU,GAAW,OAAAA,EAAO,GAAGW,cAK5D7B,YAAW,WACT,IAAM8B,EAAoBvC,KAAKc,QAC7Bd,KAAKO,SACL,SAACoB,GAAW,OAAAA,EAAOa,SAASC,QAG9BzC,KAAKL,eAAiB,CACpBqC,OAAQC,MAAMC,KAAKK,GAAmBtB,KAAI,SAACU,GAAW,OAAAA,EAAO,MAC7DQ,SAAU,CACR,CACEC,MAAO,cACPC,YAAa,UAEb3C,KAAMuC,MAAMC,KAAKK,GAAmBtB,KAClC,SAACU,GAAW,OAAAA,EAAO,GAAGW,cAMhCrC,YAAW,SAACyC,EAAOC,GACjB,IAAMvB,EAAOuB,EAAM,GACfC,EAAQxB,EAAI,OACZyB,EAAOzB,EAAI,OAAW1B,KAAKsC,OAAOY,GAC1BxB,EAAI,OAAW1B,KAAKyC,SAAS,GAAGzC,KAAKkD,GACjD5C,KAAK8C,MAAM,eAAgB,CACzBF,MAAOxB,EAAK2B,OACZC,gBAAiB5B,EAAK6B,MAAMD,gBAC5BE,MAAOL,OE9Gf,SAXgB,E,QAAA,GACd,GHRW,WAAa,IAAIM,EAAInD,KAASoD,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQD,EAAI5C,SAAW4C,EAAI5C,QAAQ+B,OAAS,EAAGgB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,KAAK,CAACH,EAAIM,GAAG,8BAA8BN,EAAIM,GAAG,KAAKH,EAAG,sBAAsB,CAACE,YAAY,YAAYE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,aAAaR,EAAIxD,eAAe,OAAS,QAAQ,GAAGwD,EAAIM,GAAG,KAAKH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,KAAK,CAACH,EAAIM,GAAG,yBAAyBN,EAAIM,GAAG,KAAKH,EAAG,uBAAuB,CAACE,YAAY,YAAYE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,aAAaR,EAAIvD,mBAAmB,QAAUuD,EAAIrD,iBAAiB,OAAS,QAAQ,KAAKwD,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,SAAS,CAACL,EAAIM,GAAG,qIAC1rB,IGUpB,EACA,KACA,KACA,MAI8B","sources":["webpack://site/./resources/js/components/MapMarkersChartComponent.vue?119a","webpack://site/./node_modules/vue-loader/lib/index.js","webpack://site/./resources/js/components/MapMarkersChartComponent.vue?7168","webpack://site/./resources/js/components/MapMarkersChartComponent.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.markers && _vm.markers.length > 1)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('h3',[_vm._v(\"Marker type distribution\")]),_vm._v(\" \"),_c('chart-pie-component',{staticClass:\"mt-5 mb-5\",staticStyle:{\"width\":\"100%\"},attrs:{\"chart-data\":_vm.datacollection,\"height\":225}})],1),_vm._v(\" \"),_c('div',{staticClass:\"col-md-6\"},[_c('h3',[_vm._v(\"New markers by date\")]),_vm._v(\" \"),_c('chart-line-component',{staticClass:\"mt-5 mb-5\",staticStyle:{\"width\":\"100%\"},attrs:{\"chart-data\":_vm.timedatacollection,\"options\":_vm.chartLineOptions,\"height\":225}})],1)]):_c('div',[_c('p',{staticClass:\"small\"},[_vm._v(\"\\n    There's not enough markers on this map yet. More stats will be available\\n    after a few more markers are added.\\n  \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nexport default {\n  props: [\"markers\"],\n  data() {\n    return {\n      datacollection: {},\n      timedatacollection: {},\n      show_all: true,\n      chartLineOptions: {\n        onClick: this.handleClick,\n        scales: {\n          xAxes: [\n            {\n              type: \"time\",\n              distribution: \"linear\",\n              // time: {\n              //     unit: 'hour'\n              // }\n            },\n          ],\n        },\n      },\n    };\n  },\n  mounted() {\n    if (this.markers) {\n      this.fillChartData();\n      this.fillPieData();\n    }\n  },\n  computed: {},\n\n  watch: {\n    markers(newValue) {\n      this.fillChartData();\n      this.fillPieData();\n    },\n  },\n\n  methods: {\n    groupBy(list, keyGetter) {\n      const map = new Map();\n      list.forEach((item) => {\n        const key = keyGetter(item);\n        const collection = map.get(key);\n        if (!collection) {\n          map.set(key, [item]);\n        } else {\n          collection.push(item);\n        }\n      });\n      return map;\n    },\n    fillChartData() {\n      const grouped = this.groupBy(this.markers, (object) => {\n        // console.log(object.created_at);\n        return Vue.moment(object.created_at).startOf(\"hour\").toString();\n      });\n      this.timedatacollection = {\n        labels: Array.from(grouped).map((object) => object[0]),\n        datasets: [\n          {\n            label: \"Markers\",\n            borderColor: \"#1C77C3\",\n            data: Array.from(grouped).map((object) => object[1].length),\n          },\n        ],\n      };\n    },\n    fillPieData() {\n      const groupedByCategory = this.groupBy(\n        this.markers,\n        (object) => object.category.name\n      );\n\n      this.datacollection = {\n        labels: Array.from(groupedByCategory).map((object) => object[0]),\n        datasets: [\n          {\n            label: \"New markers\",\n            borderColor: \"#1C77C3\",\n            // backgroundColor: '#1C77C3',\n            data: Array.from(groupedByCategory).map(\n              (object) => object[1].length\n            ),\n          },\n        ],\n      };\n    },\n    handleClick(point, event) {\n      const item = event[0];\n      let index = item[\"_index\"];\n      let date = item[\"_chart\"].data.labels[index];\n      let value = item[\"_chart\"].data.datasets[0].data[index];\n      this.$emit(\"clicked-date\", {\n        index: item._index,\n        backgroundColor: item._view.backgroundColor,\n        value: date,\n      });\n    },\n  },\n};\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/ts-loader/index.js??clonedRuleSet-6[0].rules[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/ts-loader/index.js??clonedRuleSet-6[0].rules[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MapMarkersChartComponent.vue?vue&type=template&id=1c891408&\"\nimport script from \"./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"\nexport * from \"./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["props","data","datacollection","timedatacollection","show_all","chartLineOptions","onClick","this","handleClick","scales","xAxes","type","distribution","mounted","markers","fillChartData","fillPieData","computed","watch","newValue","methods","groupBy","list","keyGetter","map","Map","forEach","item","key","collection","get","push","set","grouped","object","Vue","created_at","startOf","toString","labels","Array","from","datasets","label","borderColor","length","groupedByCategory","category","name","point","event","index","date","$emit","_index","backgroundColor","_view","value","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","attrs"],"sourceRoot":""}