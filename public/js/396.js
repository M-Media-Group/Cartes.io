(self.webpackChunksite=self.webpackChunksite||[]).push([[396],{131:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4015),a=n.n(r),s=n(3645),i=n.n(s)()(a());i.push([e.id,"li.feed-element{cursor:pointer;transition:.1s}li.feed-element:hover{background-color:var(--primary)!important}.blink{-webkit-animation:blinker 1.5s cubic-bezier(.5,0,1,1) infinite;animation:blinker 1.5s cubic-bezier(.5,0,1,1) infinite}@-webkit-keyframes blinker{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(1)}}@keyframes blinker{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(1)}}","",{version:3,sources:["webpack://./resources/js/components/MapMarkersFeedComponent.vue"],names:[],mappings:"AAwFA,gBACA,cAAA,CACA,cACA,CAEA,sBACA,yCACA,CAEA,OACA,8DAAA,CAAA,sDACA,CAEA,2BACA,GAAA,SAAA,CAAA,kBAAA,CACA,GAAA,SAAA,CAAA,kBAAA,CACA,CAHA,mBACA,GAAA,SAAA,CAAA,kBAAA,CACA,GAAA,SAAA,CAAA,kBAAA,CACA",sourcesContent:['<template>\n    <div>\n        <ul id="marker_feed" class="list-unstyled px-0 pb-3 mb-3 bg-dark card">\n            <li class="media p-3 card-header" data-toggle="collapse" data-target="#marker_feed_markers" aria-expanded="false" aria-controls="marker_feed_markers" style="cursor: pointer;">\n                <div class="media-body">\n                    <h5 class="mt-0 mb-0" v-if="is_connected_live"><i class="fa fa-circle text-danger blink"></i> Live feed</h5>\n                    <h5 class="mt-0 mb-0" v-else>Feed</h5>\n                </div>\n            </li>\n            <div id="marker_feed_markers" class="collapse show" style="max-height:57vh; overflow-y: scroll;">\n                <template v-if="limitedMarkers.length > 0">\n                    <li class="media ml-3 mr-3 p-3 mb-3 bg-secondary text-white card feed-element" v-for="marker in limitedMarkers" :key="\'marker_feed_\'+marker.id" @click="handleClick(marker)">\n                        <div class="media-body">\n                            <h5 class="mt-0 mb-1">{{marker.category.name}}</h5>\n                            <p class="mt-0 mb-1" v-html="marker.description"></p>\n                            <span class=\'timestamp small\' :datetime="marker.updated_at">{{ marker.updated_at }}</span>\n                        </div>\n                    </li>\n                </template>\n                <template v-else>\n                    <div class="text-center text-muted p-3">There\'s no active markers at this time.</div>\n                </template>\n            </div>\n        </ul>\n    </div>\n</template>\n<script>\nexport default {\n    props: [\'markers\'],\n    data() {\n        return {\n            is_connected_live: false\n        }\n    },\n    mounted() {\n        this.listenForSocketConnect()\n        this.listenForSocketDisconnect()\n        // timeago.render(document.querySelectorAll(\'.timestamp\'))\n    },\n    computed: {\n        limitedMarkers() {\n            if (!this.markers) {\n                return [];\n            }\n            var sorted_markers = this.markers.sort(function (a, b) {\n              return a.created_at < b.created_at;\n            });\n            //return sorted_markers;\n            return sorted_markers.slice(0,50);\n        }\n    },\n\n    watch: {\n        markers(newValue) {\n            this.handleNewMarker()\n        }\n    },\n\n    methods: {\n        handleClick(marker){\n            //$(window).animate({ scrollTop: $("#app").offset().top }, "fast");\n            $(\'html\').animate({\n                scrollTop: $(\'#app\').offset().top\n            }, 200);\n            //$(window).scrollTop( $("#app").offset().top );\n\n            this.$root.$emit(\'flyTo\', marker.location.coordinates);\n        },\n        listenForSocketConnect() {\n            window.Echo.connector.pusher.connection.bind(\'connected\', () => {\n              this.is_connected_live = true\n            });\n        },\n        listenForSocketDisconnect() {\n            window.Echo.connector.pusher.connection.bind(\'disconnected\', () => {\n              this.is_connected_live = false\n            });\n        },\n        handleNewMarker() {\n            $(\'#marker_feed_markers\').animate({\n                scrollTop: $(\'#app\').offset().top\n            }, 200);\n        }\n    }\n}\n\n<\/script>\n<style >\nli.feed-element {\n    cursor: pointer;\n    transition: 0.1s;\n}\n\nli.feed-element:hover {\n   background-color: var(--primary) !important;\n}\n\n.blink {\n    animation: blinker 1.5s cubic-bezier(.5, 0, 1, 1) infinite;\n}\n\n@keyframes blinker {\n  from { opacity: 1; transform: scale(0); }\n  to { opacity: 0; transform: scale(1); }\n}\n</style>\n'],sourceRoot:""}]);const o=i},5396:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});const r={props:["markers"],data:function(){return{is_connected_live:!1}},mounted:function(){this.listenForSocketConnect(),this.listenForSocketDisconnect()},computed:{limitedMarkers:function(){return this.markers?this.markers.sort((function(e,t){return e.created_at<t.created_at})).slice(0,50):[]}},watch:{markers:function(e){this.handleNewMarker()}},methods:{handleClick:function(e){$("html").animate({scrollTop:$("#app").offset().top},200),this.$root.$emit("flyTo",e.location.coordinates)},listenForSocketConnect:function(){var e=this;window.Echo.connector.pusher.connection.bind("connected",(function(){e.is_connected_live=!0}))},listenForSocketDisconnect:function(){var e=this;window.Echo.connector.pusher.connection.bind("disconnected",(function(){e.is_connected_live=!1}))},handleNewMarker:function(){$("#marker_feed_markers").animate({scrollTop:$("#app").offset().top},200)}}};var a=n(3379),s=n.n(a),i=n(131),o={insert:"head",singleton:!1};s()(i.Z,o);i.Z.locals;const c=(0,n(1900).Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"list-unstyled px-0 pb-3 mb-3 bg-dark card",attrs:{id:"marker_feed"}},[n("li",{staticClass:"media p-3 card-header",staticStyle:{cursor:"pointer"},attrs:{"data-toggle":"collapse","data-target":"#marker_feed_markers","aria-expanded":"false","aria-controls":"marker_feed_markers"}},[n("div",{staticClass:"media-body"},[e.is_connected_live?n("h5",{staticClass:"mt-0 mb-0"},[n("i",{staticClass:"fa fa-circle text-danger blink"}),e._v(" Live feed")]):n("h5",{staticClass:"mt-0 mb-0"},[e._v("Feed")])])]),e._v(" "),n("div",{staticClass:"collapse show",staticStyle:{"max-height":"57vh","overflow-y":"scroll"},attrs:{id:"marker_feed_markers"}},[e.limitedMarkers.length>0?e._l(e.limitedMarkers,(function(t){return n("li",{key:"marker_feed_"+t.id,staticClass:"media ml-3 mr-3 p-3 mb-3 bg-secondary text-white card feed-element",on:{click:function(n){return e.handleClick(t)}}},[n("div",{staticClass:"media-body"},[n("h5",{staticClass:"mt-0 mb-1"},[e._v(e._s(t.category.name))]),e._v(" "),n("p",{staticClass:"mt-0 mb-1",domProps:{innerHTML:e._s(t.description)}}),e._v(" "),n("span",{staticClass:"timestamp small",attrs:{datetime:t.updated_at}},[e._v(e._s(t.updated_at))])])])})):[n("div",{staticClass:"text-center text-muted p-3"},[e._v("There's no active markers at this time.")])]],2)])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=396.js.map