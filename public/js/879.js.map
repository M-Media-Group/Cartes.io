{"version":3,"sources":["webpack://site/resources/js/components/MapMarkersChartComponent.vue","webpack://site/./resources/js/components/MapMarkersChartComponent.vue?04a2","webpack://site/./resources/js/components/MapMarkersChartComponent.vue","webpack://site/./resources/js/components/MapMarkersChartComponent.vue?46d9"],"names":["props","data","datacollection","timedatacollection","show_all","chartLineOptions","onClick","this","handleClick","scales","xAxes","mounted","markers","fillChartData","fillPieData","computed","watch","methods","groupBy","list","forEach","collection","push","item","map","set","key","Vue","moment","object","created_at","startOf","toString","labels","Array","from","grouped","datasets","groupedByCategory","$emit","index","_index","backgroundColor","_view","value","date","_vm","_h","$createElement","_c","_self","length","staticClass","_v","staticStyle","attrs"],"mappings":"yHA8BA,MC9BmO,ED8BnO,CACEA,MAAO,CAAC,WACRC,KAFF,WAGI,MAAO,CACLC,eAAgB,GAChBC,mBAAoB,GACpBC,UAAU,EACVC,iBAAkB,CAChBC,QAASC,KAAKC,YACdC,OAAQ,CACNC,MAAO,CACjB,CACY,KAAZ,OACY,aAAZ,eAUEC,QAvBF,WAwBQJ,KAAKK,UACPL,KAAKM,gBACLN,KAAKO,gBAGTC,SAAU,GAEVC,MAAO,CACLJ,QADJ,SACA,GACML,KAAKM,gBACLN,KAAKO,gBAITG,QAAS,CACPC,QADJ,SACA,KACM,IAAN,UAUM,OATAC,EAAKC,SAAQ,SAAnB,GACQ,IAAR,OACA,WACaC,EAGHA,EAAWC,KAAKC,GAFhBC,EAAIC,IAAIC,EAAK,CAACH,OAKXC,GAETX,cAdJ,WAeM,IAAN,yCAEQ,OAAOc,IAAIC,OAAOC,EAAOC,YAAYC,QAAQ,QAAQC,cAEvDzB,KAAKJ,mBAAqB,CACxB8B,OAAQC,MAAMC,KAAKC,GAASZ,KAAI,SAAxC,kBACQa,SAAU,CAClB,CACU,MAAV,UACU,YAAV,UACU,KAAV,+BAAY,OAAZ,mBAKIvB,YA9BJ,WA+BM,IAAN,eACA,cACA,YAAQ,OAAR,mBAGMP,KAAKL,eAAiB,CACpB+B,OAAQC,MAAMC,KAAKG,GAAmBd,KAAI,SAAlD,kBACQa,SAAU,CAClB,CACU,MAAV,cACU,YAAV,UAEU,KAAV,mBACA,YAAY,OAAZ,mBAMI7B,YAlDJ,SAkDA,KACM,IAAN,OACA,WACA,0BACA,kCACMD,KAAKgC,MAAM,eAAgB,CACzBC,MAAOjB,EAAKkB,OACZC,gBAAiBnB,EAAKoB,MAAMD,gBAC5BE,MAAOC,OE5Gf,SAXgB,E,QAAA,GACd,GCRW,WAAa,IAAIC,EAAIvC,KAASwC,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAQD,EAAIlC,SAAWkC,EAAIlC,QAAQuC,OAAS,EAAGF,EAAG,MAAM,CAACG,YAAY,OAAO,CAACH,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,KAAK,CAACH,EAAIO,GAAG,8BAA8BP,EAAIO,GAAG,KAAKJ,EAAG,sBAAsB,CAACG,YAAY,YAAYE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,aAAaT,EAAI5C,eAAe,OAAS,QAAQ,GAAG4C,EAAIO,GAAG,KAAKJ,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,KAAK,CAACH,EAAIO,GAAG,yBAAyBP,EAAIO,GAAG,KAAKJ,EAAG,uBAAuB,CAACG,YAAY,YAAYE,YAAY,CAAC,MAAQ,QAAQC,MAAM,CAAC,aAAaT,EAAI3C,mBAAmB,QAAU2C,EAAIzC,iBAAiB,OAAS,QAAQ,KAAK4C,EAAG,MAAM,CAACA,EAAG,IAAI,CAACG,YAAY,SAAS,CAACN,EAAIO,GAAG,qIAC1rB,IDUpB,EACA,KACA,KACA,M","file":"js/879.js","sourcesContent":["<template>\n  <div v-if=\"markers && markers.length > 1\" class=\"row\">\n    <div class=\"col-md-6\">\n      <h3>Marker type distribution</h3>\n      <chart-pie-component\n        :chart-data=\"datacollection\"\n        :height=\"225\"\n        style=\"width: 100%\"\n        class=\"mt-5 mb-5\"\n      ></chart-pie-component>\n    </div>\n    <div class=\"col-md-6\">\n      <h3>New markers by date</h3>\n      <chart-line-component\n        :chart-data=\"timedatacollection\"\n        :options=\"chartLineOptions\"\n        :height=\"225\"\n        style=\"width: 100%\"\n        class=\"mt-5 mb-5\"\n      ></chart-line-component>\n    </div>\n  </div>\n  <div v-else>\n    <p class=\"small\">\n      There's not enough markers on this map yet. More stats will be available\n      after a few more markers are added.\n    </p>\n  </div>\n</template>\n<script lang=\"ts\">\nexport default {\n  props: [\"markers\"],\n  data() {\n    return {\n      datacollection: {},\n      timedatacollection: {},\n      show_all: true,\n      chartLineOptions: {\n        onClick: this.handleClick,\n        scales: {\n          xAxes: [\n            {\n              type: \"time\",\n              distribution: \"linear\",\n              // time: {\n              //     unit: 'hour'\n              // }\n            },\n          ],\n        },\n      },\n    };\n  },\n  mounted() {\n    if (this.markers) {\n      this.fillChartData();\n      this.fillPieData();\n    }\n  },\n  computed: {},\n\n  watch: {\n    markers(newValue) {\n      this.fillChartData();\n      this.fillPieData();\n    },\n  },\n\n  methods: {\n    groupBy(list, keyGetter) {\n      const map = new Map();\n      list.forEach((item) => {\n        const key = keyGetter(item);\n        const collection = map.get(key);\n        if (!collection) {\n          map.set(key, [item]);\n        } else {\n          collection.push(item);\n        }\n      });\n      return map;\n    },\n    fillChartData() {\n      const grouped = this.groupBy(this.markers, (object) => {\n        // console.log(object.created_at);\n        return Vue.moment(object.created_at).startOf(\"hour\").toString();\n      });\n      this.timedatacollection = {\n        labels: Array.from(grouped).map((object) => object[0]),\n        datasets: [\n          {\n            label: \"Markers\",\n            borderColor: \"#1C77C3\",\n            data: Array.from(grouped).map((object) => object[1].length),\n          },\n        ],\n      };\n    },\n    fillPieData() {\n      const groupedByCategory = this.groupBy(\n        this.markers,\n        (object) => object.category.name\n      );\n\n      this.datacollection = {\n        labels: Array.from(groupedByCategory).map((object) => object[0]),\n        datasets: [\n          {\n            label: \"New markers\",\n            borderColor: \"#1C77C3\",\n            // backgroundColor: '#1C77C3',\n            data: Array.from(groupedByCategory).map(\n              (object) => object[1].length\n            ),\n          },\n        ],\n      };\n    },\n    handleClick(point, event) {\n      const item = event[0];\n      let index = item[\"_index\"];\n      let date = item[\"_chart\"].data.labels[index];\n      let value = item[\"_chart\"].data.datasets[0].data[index];\n      this.$emit(\"clicked-date\", {\n        index: item._index,\n        backgroundColor: item._view.backgroundColor,\n        value: date,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MapMarkersChartComponent.vue?vue&type=template&id=7e4106ca&\"\nimport script from \"./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"\nexport * from \"./MapMarkersChartComponent.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.markers && _vm.markers.length > 1)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('h3',[_vm._v(\"Marker type distribution\")]),_vm._v(\" \"),_c('chart-pie-component',{staticClass:\"mt-5 mb-5\",staticStyle:{\"width\":\"100%\"},attrs:{\"chart-data\":_vm.datacollection,\"height\":225}})],1),_vm._v(\" \"),_c('div',{staticClass:\"col-md-6\"},[_c('h3',[_vm._v(\"New markers by date\")]),_vm._v(\" \"),_c('chart-line-component',{staticClass:\"mt-5 mb-5\",staticStyle:{\"width\":\"100%\"},attrs:{\"chart-data\":_vm.timedatacollection,\"options\":_vm.chartLineOptions,\"height\":225}})],1)]):_c('div',[_c('p',{staticClass:\"small\"},[_vm._v(\"\\n    There's not enough markers on this map yet. More stats will be available\\n    after a few more markers are added.\\n  \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}